var leikiComLoader=leikiComLoader||{};var _leikiw=_leikiw||[];leikiComLoader.Configurations=leikiComLoader.Configurations||(function(){return{widgetsVariableArray:_leikiw,widgetsLoadAnticipation:0.5,showTestPopup:false,adsMaxWait:5000,localStorageKeys:{uid:"leiki_uid"}}})();leikiComLoader.Widget=leikiComLoader.Widget||(function(){return{initWidget:function(a){try{if(a.init){return}a.element=document.getElementById(a.elementId);a.fixedRecommendations=leikiComLoader.Utils.getFixedRecommendations(a);a.init=true}catch(b){}},loadAll:function(){try{for(var b=0;b<leikiComLoader.Configurations.widgetsVariableArray.length;b++){var c=leikiComLoader.Configurations.widgetsVariableArray[b];leikiComLoader.Widget.initWidget(c);var a=(c.loadAlways||c.isJson||c.isDfp||c.isAdtech)?true:leikiComLoader.DomUtils.isVisible(c);if(a){try{if(c.isJson){leikiComLoader.Widget.loadJsonWidget(c)}else{if(c.isDfp){leikiComLoader.Widget.loadDfpWidget(c)}else{if(c.isAdtech){leikiComLoader.Widget.loadAdtechWidget(c)}else{if(c.iframe){leikiComLoader.Widget.loadWidgetInIframe(c)}else{leikiComLoader.Widget.loadWidget(c)}}}}leiki_first="no"}catch(d){}leikiComLoader.Configurations.widgetsVariableArray.splice(b,1);b--}}if(leikiComLoader.Configurations.showTestPopup){leikiComLoader.Utils.showPopup(leikiComLoader.Configurations.widgetsVariableArray.length+"")}if(leikiComLoader.Configurations.widgetsVariableArray.length>0){if(!window._leikiResizeEvent){window._leikiResizeEvent=true;leikiComLoader.DomUtils.addEvent("scroll",window,leikiComLoader.Widget.loadAll);leikiComLoader.DomUtils.addEvent("resize",window,leikiComLoader.Widget.loadAll)}}else{if(window._leikiResizeEvent){window._leikiResizeEvent=false;leikiComLoader.DomUtils.removeEvent("scroll",window,leikiComLoader.Widget.loadAll);leikiComLoader.DomUtils.removeEvent("resize",window,leikiComLoader.Widget.loadAll)}}}catch(d){}},loadWidget:function(b){var a=leikiComLoader.Utils.buildWidgetUrl(b);leikiComLoader.DomUtils.addScriptTag(a,b.isSynchronous)},loadJsonWidget:function(c){var a=leikiComLoader.Utils.buildWidgetUrl(c);var b="jsonCallback"+parseInt(Math.random()*1000000000);leikiComLoader[b]=function(d){if(typeof(c.jsonCallback)==="function"){c.jsonCallback(d)}if(d.leikiUid&&d.leikiUid.trim().length>0){leikiComLoader.Utils.setUserId(d.leikiUid)}};a+="&callback=leikiComLoader."+b;leikiComLoader.DomUtils.addScriptTag(a,c.isSynchronous)},loadDfpWidget:function(c){var a=leikiComLoader.Utils.buildWidgetUrl(c);var d=false;setTimeout(function(){leikiComLoader[b]({})},leikiComLoader.Configurations.adsMaxWait);var b="jsonCallback"+parseInt(Math.random()*1000000000);leikiComLoader[b]=function(f){if(d){return}d=true;if(typeof(c.dfpCallback)==="function"){var g=leikiComLoader.Utils.parseAdParams(f);for(key in g){var e=g[key];if(key&&e&&e.length){googletag.pubads().setTargeting(key,e)}}window._leikiParams=g;if(f.leikiUid){googletag.pubads().setTargeting("leikiuid",f.leikiUid)}c.dfpCallback(f)}if(f.leikiUid&&f.leikiUid.trim().length>0){leikiComLoader.Utils.setUserId(f.leikiUid)}};a+="&callback=leikiComLoader."+b;leikiComLoader.DomUtils.addScriptTag(a,c.isSynchronous)},loadAdtechWidget:function(c){var a=leikiComLoader.Utils.buildWidgetUrl(c);var d=false;setTimeout(function(){leikiComLoader[b]({})},leikiComLoader.Configurations.adsMaxWait);var b="jsonCallback"+parseInt(Math.random()*1000000000);leikiComLoader[b]=function(j){if(d){leikiComLoader.Widget.loadAdtechAds();return}d=true;try{var l=leikiComLoader.Utils.parseAdParams(j);var h="";for(key in l){var f=l[key];if(key&&f&&f.length){if(window.ADTECH&&window.ADTECH.config&&window.ADTECH.config.page){if(!window.ADTECH.config.page.kv){window.ADTECH.config.page.kv={}}window.ADTECH.config.page.kv[key]=f}if(c.isSynchronous){h+="kv"+encodeURIComponent(key)+"=";for(var g=0;g<f.length;g++){if(g>0){h+=":"}h+=encodeURIComponent(f[g])}h+=";"}}}window.leikiAdtechSegmentStr=h;if(j.leikiUid&&j.leikiUid.trim().length>0){leikiComLoader.Utils.setUserId(j.leikiUid)}}catch(k){}leikiComLoader.Widget.loadAdtechAds()};a+="&callback=leikiComLoader."+b;leikiComLoader.DomUtils.addScriptTag(a,c.isSynchronous)},loadAdtechAds:function(){try{ADTECH.enqueueAd=ADTECH._enqueueAd;ADTECH.executeQueue=ADTECH._executeQueue;window._leikicache.forEach(function(b){try{ADTECH[b.name](b.params)}catch(c){}});window._leikicache=[]}catch(a){}},loadWidgetInIframe:function(c){var b=c.element;delete c.init;delete c.element;var a=c.server+"/widgets/loader/loader_iframe.html?"+encodeURIComponent(JSON.stringify(c));leikiComLoader.DomUtils.addIframeTag(b,a,c.iframe.width,c.iframe.height)},onClick:function(d,a){try{var b="";b=leikiComLoader.Utils.getParameterByName(d.href,"_ga");if(!b){if(window.ga){var c=window.ga.getByName("master");if(!c){var i=window.ga.getAll();if(i&&i.length>0){c=i[0]}}if(c){var f=new window.gaplugins.Linker(c);if(f){var h=f.decorate(d.href);if(h&&h.length>0){b=leikiComLoader.Utils.getParameterByName(h,"_ga")}}}}}if(b&&b.length>0){a+="&crv="+encodeURIComponent("_ga="+b)}d.href=a}catch(g){d.href=a}}}})();leikiComLoader.DomUtils=leikiComLoader.DomUtils||(function(){return{addEvent:function(c,b,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}},removeEvent:function(c,b,a){if(b.removeEventListener){b.removeEventListener(c,a,false)}else{if(b.detachEvent){b.detachEvent("on"+c,a)}}},findPos:function(b){var a=0;if(b.offsetParent){do{a+=b.offsetTop}while(b=b.offsetParent)}return a},isVisible:function(c){var e=(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;var d=(window.innerHeight)?window.innerHeight:document.documentElement.clientHeight;var b=leikiComLoader.DomUtils.findPos(c.element);var a=((d*(1+leikiComLoader.Configurations.widgetsLoadAnticipation))+e-b)>0;return a},addScriptTag:function(c,e){if(e){document.write('<script src="'+c+'"><\/script>')}else{var d=document.createElement("script");d.type="text/javascript";d.async=true;d.src=c;var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b);var a=function(){try{var g=this;window.setTimeout(function(){try{g.parentNode.removeChild(g)}catch(h){}},250)}catch(f){}};d.onreadystatechange=function(){if(this.readyState=="complete"){a()}};d.onload=a}},addIframeTag:function(c,b,e,a){var d=document.createElement("iframe");d.src=b;d.style.width=e+((!isNaN(e)||e.indexOf("%")===-1)?"px":"");d.style.height=a+((!isNaN(a)||a.indexOf("%")===-1)?"px":"");d.style.border="0";d.style.backgroundColor="transparent";d.style.overflow="hidden";d.style.zIndex="100000";d.scrolling="no";d.frameBorder="no";d.allowTransparency=true;c.appendChild(d)},addForm:function(b,f){var d=document.createElement("form");d.target="leikiwidgetcontainerframe";d.setAttribute("method","post");d.setAttribute("action",b);for(var c=0;c<f.length;c++){var e=f[c];d=leikiComLoader.DomUtils.addHiddenInput(d,e.name,e.value)}var a=document.body;a.appendChild(d);return d},addHiddenInput:function(c,b,d){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("name",b);a.setAttribute("value",d);c.appendChild(a);return c},getHtmlData:function(){var d=document.getElementsByTagName("HTML")[0];var a=d.innerHTML;var b="";for(var c=0;c<d.attributes.length;c++){b+=d.attributes[c].name+'="'+d.attributes[c].value+'" '}return"<html "+b+">"+a+"</html>"}}})();leikiComLoader.Utils=leikiComLoader.Utils||(function(){return{showPopup:function(c){var a=document.getElementById("leikiWTestPopup")||document.createElement("div");a.id="leikiWTestPopup";a.innerHTML=c;a.style.position="fixed";a.style.backgroundColor="red";a.style.right=0;a.style.bottom=0;a.style.padding="5px";var b=document.getElementsByTagName("body")[0];b.parentNode.insertBefore(a,b)},getFixedRecommendations:function(b){var a;if(b.fixedVariableName){a=window[b.fixedVariableName]}if(!a){a=window["_leikif_"+b.name]}return a},buildWidgetUrl:function(b){var a=b.server+"/mwidget?"+leikiComLoader.Utils.buildWidgetParameters(b);return a},buildWidgetParameters:function(h){var b="wname="+h.name+""+((typeof h.cid!=="undefined"&&h.cid!="")?"&cid="+encodeURIComponent(h.cid):"");try{if(typeof leiki_first!=="undefined"){var a=window.location.href;if(this.leiki_first_previous_url&&this.leiki_first_previous_url!=a){delete leiki_first}this.leiki_first_previous_url=a}}catch(k){}if(!h.forceUserProfiling&&typeof leiki_first!=="undefined"){b+="&first="+leiki_first}else{b+="&first=undefined"}if(h.referer){b+="&referer="+encodeURIComponent(h.referer)}if(h.userTag){b+="&usertag="+encodeURIComponent(h.userTag)}b+="&ts="+new Date().getTime();if(h.fixedRecommendations&&h.fixedRecommendations.length>0){var j="&";for(var d=0;d<h.fixedRecommendations.length;d++){var g=h.fixedRecommendations[d];j+="fixed"+(d+1)+"="+encodeURIComponent(g)+"&"}b+=j}var c=leikiComLoader.Utils.getUserId();if(c&&c.trim().length>0){b+="&userid="+c}return b},parseAdParams:function(g){var d={};if(g&&g.tabs){for(var f=0;f<g.tabs.length;f++){var c=g.tabs[f];if(c&&c.items&&c.headline){var h=c.headline.toLowerCase();for(var e=0;e<c.items.length;e++){var k=c.items[e];var b=k.id;var a=d[h];if(!a){a=[];d[h]=a}a.push(b)}}}}return d},getParameterByName:function(b,a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=d.exec(b);return c===null?null:c[1].replace(/\+/g," ")},getUserId:function(){var a;if(window.localStorage){var a=window.localStorage.getItem(leikiComLoader.Configurations.localStorageKeys.uid);if(!a||a.trim().length==0){a="-first";leikiComLoader.Utils.setUserId(a)}}return a},setUserId:function(a){if(window.localStorage){window.localStorage.setItem(leikiComLoader.Configurations.localStorageKeys.uid,a)}}}})();leikiComLoader.AutoScraper=leikiComLoader.AutoScraper||(function(){var a=function(){try{var b=document.createElement("iframe");b.id="leikiwidgetcontainerframe";b.name="leikiwidgetcontainerframe";document.body.appendChild(b);b.style.display="none";b.style.border="0";b.style.width="1px";b.style.height="1px";b.contentWindow.name="leikiwidgetcontainerframe";b.onload=function(){try{this.parentNode.removeChild(this)}catch(g){}};var f=[];f.push({name:"leiki_first",value:"no"});f.push({name:"cid",value:leiki_cid});f.push({name:"wname",value:leiki_wname});f.push({name:"ishtml",value:"true"});f.push({name:"htmldata",value:encodeURIComponent(leikiComLoader.DomUtils.getHtmlData())});var c=leikiComLoader.DomUtils.addForm(window.leiki_url,f);b.onload=function(){try{this.parentNode.removeChild(this);c.parentNode.removeChild(c)}catch(g){}};c.submit()}catch(d){}};return{scrape:function(d){try{if(!window.leiki_url){return}if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){return}if(/trident\//.test(navigator.userAgent.toLowerCase())){return}var b=(/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));if(b){return}var c=d||0;window.setTimeout(function(){if(!window.document.readyState||window.document.readyState=="complete"){a()}else{if(c<3){window.setTimeout(function(){leikiComLoader.AutoScraper.scrape(c+1)},2000)}}},2000)}catch(f){}}}})();leikiComLoader.Widget.loadAll();